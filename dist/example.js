parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"aIPe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IMU=exports.ACC=exports.AFE=exports.ORIENTATION=exports.CONTACT_STATE=exports.CONNECTIVITY=exports.CMD=exports.ERROR=void 0;var e=i({unknown:0,ble_device_unreachable:-128,ble_not_enabled:-129});exports.ERROR=e;var t=i({afeConfig:-1,imuConfig:-2,unused:0,pair:1,checkPairStatus:2,startDataStream:3,stopDataStream:4,shutdown:5,enterOTA:6,enterFactoryMode:7,restoreFactorySettings:8,setLEDColor:9,setDeviceName:10,setSleepIdleTime:11,setVibrationIntensity:12,getSystemInfo:13,getLeadOffStatus:14});exports.CMD=t;var r=i({connecting:0,connected:1,disconnecting:2,disconnected:3});exports.CONNECTIVITY=r;var n=i({unknown:0,contact:1,no_contact:2});exports.CONTACT_STATE=n;var o=i({unknown:0,bottomUp:1,leftArmEndUp:2,leftArmEndDown:3,topUp:4,leftFaceUp:5,leftFaceDown:6});exports.ORIENTATION=o;var a={SAMPLE_RATE:i({sr125:0,sr250:1,sr500:2,sr1000:3}),CHANNEL:i({none:0,ch1:1,ch2:2,both:3}),LEAD_OFF_OPTION:i({disabled:0,ac:1,dc_6na:2,dc_22na:3,dc_6ua:4,dc_22ua:5})};exports.AFE=a;var s={SAMPLE_RATE:i({sr1:0,sr10:1,sr25:2,sr50:3,sr100:4,sr200:5}),OPTION:i({disabled:0,raw:1,six_d:2})};exports.ACC=s;var c={SAMPLE_RATE:i({unused:0,sr125:16,sr26:32,sr52:48,sr104:64,sr208:80,sr416:96,sr833:112})};function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:String,r=" ENUM => VALUE (".concat(t.name,")\n");r+=" -----------------------\n";var n=new Map,o=new Map;for(var a in e){var s=t(a),c=e[s];if(o.has(c))throw Error("the enum '".concat(c,"' is duplicated"));n.set(s,c),o.set(c,s),r+=" ".concat(c," => ").concat(s,"\n")}var i=function(e){if(!o.has(e))throw Error("Invalid Enum: ".concat(e,". The enum/value should be:\n").concat(r));return o.get(e)};for(var u in i.enum=function(e){if(!n.has(e))throw Error("Invalid Value: ".concat(e,". The enum/value should be:\n").concat(r));return n.get(e)},e){var d=String(u).toUpperCase();i[d]=t(u),i.enum[d]=e[u]}return i}exports.IMU=c;
},{}],"DjNL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CMSNDevice=exports.CMSNDeviceListener=void 0;var e,t=r(require("./cmsn_enum.js"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=f(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function i(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(u){return void n(u)}c.done?t(s):Promise.resolve(s).then(r,a)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function c(e){i(o,r,a,c,s,"next",e)}function s(e){i(o,r,a,c,s,"throw",e)}c(void 0)})}}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e,t){return h(e)||d(e,t)||f(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){a=!0,i=s}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return n}}function h(e){if(Array.isArray(e))return e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=new Map,g="0d740001-d26f-4dbb-95e8-a4f5c55c57a9",m="0d740002-d26f-4dbb-95e8-a4f5c55c57a9",y="0d740003-d26f-4dbb-95e8-a4f5c55c57a9",C={onError:"(CMSNDevice, Error)=>Void",onConnectivityChanged:"(CMSNDevice, Connectivity)=>Void",onDeviceInfoReady:"(CMSNDevice, DeviceInfo)=>Void",onPairResponse:"(CMSNDevice, SysConfigResponse)=>Void",onContactStateChanged:"(CMSNDevice, ContactState)=>Void",onOrientationChanged:"(CMSNDevice, Orientation)=>Void",onBrainWave:"(CMSNDevice, BrainWave)=>Void",onEEGData:"(CMSNDevice, EEGData)=>Void",onIMUData:"(CMSNDevice, IMUData)=>Void",onAttention:"(CMSNDevice, Float)=>Void",onMeditation:"(CMSNDevice, Float)=>Void"},k=function e(t){b(this,e);for(var n=t||{},r=0,a=Object.entries(n);r<a.length;r++){var i=u(a[r],2),o=i[0],c=i[1];o in C?"function"==typeof c?this[o]=c:console.error("ERROR: Callback for ".concat(o," is not a function, should be ").concat(e.availableCallbacks[o])):console.error("ERROR:".concat(o," is not an option for ").concat(this))}};exports.CMSNDeviceListener=k;var D=function(){function e(t){b(this,e),this.window=t}return s(e,[{key:"setup",value:function(){var e=o(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.listener=t,null==this.bleDevice){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,navigator.bluetooth.getAvailability();case 6:if(n=e.sent,console.log("> Bluetooth is ".concat(n?"available":"unavailable")),n){e.next=10;break}return e.abrupt("return");case 10:"onavailabilitychanged"in navigator.bluetooth&&navigator.bluetooth.addEventListener("availabilitychanged",function(e){console.log("> Bluetooth is ".concat(e.value?"available":"unavailable"))}),console.log("Requesting any Bluetooth Device..."),r={acceptAllDevices:!0},navigator.bluetooth.requestDevice(r).then(function(e){console.log("Name: "+e.name)}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.log("Argh! "+e.t0);case 19:case"end":return e.stop()}},e,this,[[3,16]])}));return function(t){return e.apply(this,arguments)}}()},{key:"exponentialBackoff",value:function(){var e=o(regeneratorRuntime.mark(function e(t,n,r,a,i){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=this,e.prev=1,e.t0=a,e.t1=this,e.next=6,r(this);case 6:e.t2=e.sent,(0,e.t0)(e.t1,e.t2),e.next=16;break;case 10:if(e.prev=10,e.t3=e.catch(1),0!==t){e.next=14;break}return e.abrupt("return",i());case 14:console.log("Retrying in "+n+"s... ("+t+" tries left)"),setTimeout(function(){o.exponentialBackoff(--t,2*n,r,a,i)},1e3*n);case 16:case"end":return e.stop()}},e,this,[[1,10]])}));return function(t,n,r,a,i){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.onTryConnect();case 2:return e.next=4,this.onConnected();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onTryConnect",value:function(){var e=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Connecting to Bluetooth Device... "),this.connectivity=t.CONNECTIVITY.enum("connecting"),console.log(this.bleDevice.gatt),e.next=5,this.bleDevice.gatt.connect();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onConnected",value:function(){var e=o(regeneratorRuntime.mark(function e(){var n,r,i,o,c,s,u,l,f,v,d,h,b,p,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("> Bluetooth Device connected."),this.connectivity=t.CONNECTIVITY.enum("connected"),console.log("Getting Services..."),e.next=5,this.bleDevice.gatt.getPrimaryServices();case 5:n=e.sent,r=new TextDecoder("utf-8"),console.log("Getting Characteristics..."),e.prev=8,i={},o=a(n),e.prev=11,o.s();case 13:if((c=o.n()).done){e.next=89;break}return s=c.value,console.log("> Service: "+s.uuid),e.next=18,s.getCharacteristics();case 18:u=e.sent,l=a(u),e.prev=20,l.s();case 22:if((f=l.n()).done){e.next=79;break}if(v=f.value,s.uuid!=g){e.next=38;break}if(!v.properties.write){e.next=30;break}console.log("characteristicWrite=".concat(v)),this.characteristicWrite=v,e.next=36;break;case 30:if(!v.properties.notify){e.next=36;break}return console.log("characteristicNotify=".concat(v)),this.characteristicNotify=v,e.next=35,v.startNotifications();case 35:v.addEventListener("characteristicvaluechanged",w);case 36:e.next=77;break;case 38:e.t0=v.uuid,e.next=e.t0===BluetoothUUID.getCharacteristic("battery_level")?41:e.t0===BluetoothUUID.getCharacteristic("manufacturer_name_string")?47:e.t0===BluetoothUUID.getCharacteristic("model_number_string")?53:e.t0===BluetoothUUID.getCharacteristic("serial_number_string")?59:e.t0===BluetoothUUID.getCharacteristic("hardware_revision_string")?65:e.t0===BluetoothUUID.getCharacteristic("firmware_revision_string")?71:77;break;case 41:return e.next=43,v.startNotifications();case 43:return v.addEventListener("characteristicvaluechanged",x),e.next=46,v.readValue();case 46:return e.abrupt("break",77);case 47:return e.next=49,v.readValue();case 49:return d=e.sent,i.manufacturer=r.decode(d),console.log("> manufacturer_name: "+i.manufacturer),e.abrupt("break",77);case 53:return e.next=55,v.readValue();case 55:return h=e.sent,i.model=r.decode(h),console.log("> model_number: "+i.model),e.abrupt("break",77);case 59:return e.next=61,v.readValue();case 61:return b=e.sent,i.serial=r.decode(b),console.log("> serial_number: "+i.serial),e.abrupt("break",77);case 65:return e.next=67,v.readValue();case 67:return p=e.sent,i.hardware=r.decode(p),console.log("> hardware_revision: "+i.hardware),e.abrupt("break",77);case 71:return e.next=73,v.readValue();case 73:return m=e.sent,i.firmware=r.decode(m),console.log("> firmware_revision: "+i.firmware),e.abrupt("break",77);case 77:e.next=22;break;case 79:e.next=84;break;case 81:e.prev=81,e.t1=e.catch(20),l.e(e.t1);case 84:return e.prev=84,l.f(),e.finish(84);case 87:e.next=13;break;case 89:e.next=94;break;case 91:e.prev=91,e.t2=e.catch(11),o.e(e.t2);case 94:return e.prev=94,o.f(),e.finish(94);case 97:this.deviceInfo=i,this.listener&&this.listener.onDeviceInfoReady(this,this.deviceInfo),e.next=104;break;case 101:e.prev=101,e.t3=e.catch(8),console.log("Argh! "+e.t3);case 104:case"end":return e.stop()}},e,this,[[8,101],[11,91,94,97],[20,81,84,87]])}));return function(){return e.apply(this,arguments)}}()},{key:"reset",value:function(){this.characteristicWrite=void 0,this.characteristicNotify=void 0}},{key:"sendMessage",value:function(e){null!=this.characteristicWrite?(e.cb=void 0,console.log("sendMessage, ".concat(JSON.stringify(e))),this.postToSanbox("sendMessage",e)):console.warn("device is not reday.")}},{key:"postToSanbox",value:function(e,t){var n={uuid:this.uuid,command:e,params:t};this.window.postMessage(n,"*")}},{key:"pair",value:function(e){this.sendMessage({cmd:t.CMD.enum("pair"),isInPairingMode:e})}},{key:"startDataStream",value:function(){this.sendMessageWithCmd(t.CMD.enum("startDataStream"))}},{key:"stopDataStream",value:function(){this.sendMessageWithCmd(t.CMD.enum("stopDataStream"))}},{key:"startIMU",value:function(e,n){var r={cmd:t.CMD.enum("afeConfig"),sampleRate:e,cb:n};console.log("startIMU, ".concat(r)),this.sendMessage(r)}},{key:"stopIMU",value:function(e){var n={cmd:t.CMD.enum("imuConfig"),sampleRate:t.IMU.SAMPLE_RATE.unused,cb:e};console.log("stopIMU, ".concat(n)),this.sendMessage(n)}},{key:"setLedColor",value:function(e){this.sendMessage({cmd:t.CMD.enum("setLedColor"),color:e})}},{key:"setDeviceName",value:function(e,n){this.sendMessage({cmd:t.CMD.enum("setDeviceName"),name:e,cb:n})}},{key:"setSleepIdleTime",value:function(e,n){this.sendMessage({cmd:t.CMD.enum("setSleepIdleTime"),value:e,cb:n})}},{key:"setVibrationIntensity",value:function(e,n){this.sendMessage({cmd:t.CMD.enum("setVibrationIntensity"),value:e,cb:n})}},{key:"sendMessageWithCmd",value:function(e,t){this.sendMessage({cmd:e,cb:t})}},{key:"connectivity",set:function(e){this._connectivity=e,this.listener&&this.listener.onConnectivityChanged(this,e)}}]),e}();function M(){console.log("> Bluetooth Device disconnected"),console.log(this);var e=p.get(this.id);console.log(e),e&&(e.reset(),this.connectivity=t.CONNECTIVITY.enum("disconnected"),setTimeout(function(){e.connect()},1e3))}function x(t){var n=t.target.value.getUint8(0);console.log("> Battery Level is "+n+"%"),e.batteryLevel=n}function w(t){var n=t.target.value.buffer,r=new Uint8Array(n);e.postToSanbox("didReceiveData",{data:r})}exports.CMSNDevice=D,window.addEventListener("message",function(){var e=o(regeneratorRuntime.mark(function e(t){var n,r,a,i,o,c,s,u,l,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data.command,r=t.data.params,a=r.deviceId,null!=(i=p.get(a))){e.next=7;break}return console.error("device == null"),e.abrupt("return");case 7:e.t0=n,e.next="onContactStateChanged"===e.t0?10:"onOrientationChanged"===e.t0?13:"onEEGData"===e.t0?16:"onBrainWave"===e.t0?19:"onIMUData"===e.t0?22:"onAttention"===e.t0?25:"onMeditation"===e.t0?28:"writeValue"===e.t0?31:36;break;case 10:return o=r.contactState,i&&i.listener&&i.listener.onContactStateChanged(i,o),e.abrupt("break",37);case 13:return c=r.orientation,i&&i.listener&&i.listener.onOrientationChanged(i,c),e.abrupt("break",37);case 16:return s=r.eeg,i&&i.listener&&i.listener.onEEGData(i,s),e.abrupt("break",37);case 19:return u=r.stats,i&&i.listener&&i.listener.onBrainWave(i,u),e.abrupt("break",37);case 22:return r.imu,i&&i.listener&&i.listener.onIMUData(i,l),e.abrupt("break",37);case 25:return l=r.value,i&&i.listener&&i.listener.onAttention(i,l),e.abrupt("break",37);case 28:return f=r.value,i&&i.listener&&i.listener.onMeditation(i,f),e.abrupt("break",37);case 31:if(null!=i.characteristicWrite){e.next=34;break}return console.log("characteristicWrite null"),e.abrupt("return");case 34:return i.characteristicWrite.writeValue(r.data),e.abrupt("break",37);case 36:return e.abrupt("break",37);case 37:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());
},{"./cmsn_enum.js":"aIPe"}],"Zdfz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.scanBluetooth=l;var e=o(require("./src/cmsn_enum.js")),n=o(require("./src/cmsn_sdk.js"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function o(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t();if(n&&n.has(e))return n.get(e);var o={},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=c?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(o,r,i):o[r]=e[r]}return o.default=e,n&&n.set(e,o),o}function c(e,n,t,o,c,r,i){try{var a=e[r](i),u=a.value}catch(s){return void t(s)}a.done?n(u):Promise.resolve(u).then(o,c)}function r(e){return function(){var n=this,t=arguments;return new Promise(function(o,r){var i=e.apply(n,t);function a(e){c(i,o,r,a,u,"next",e)}function u(e){c(i,o,r,a,u,"throw",e)}a(void 0)})}}function i(e,n){console.log("Event Raised");new Date}var a=new n.CMSNDeviceListener({onConnectivityChanged:function(n,t){console.log({message:"[".concat(n.name,"] Connectivity changed to: ").concat(e.CONNECTIVITY(t))}),document.getElementById("connectivity").innerText="connectivity: "+e.CONNECTIVITY(t)},onDeviceInfoReady:function(e,n){console.log("[".concat(e.name,"] Device info is ready:")),console.log(n),document.getElementById("deviceInfo").innerText=JSON.stringify(n)},onContactStateChanged:function(n,t){console.log({message:"[".concat(n.name,"] Contact state changed to:").concat(e.CONTACT_STATE(t))}),document.getElementById("contactState").innerText="contactState: "+e.CONTACT_STATE(t)},onOrientationChanged:function(n,t){console.log("[".concat(n.name,"] Orientation changed to:").concat(e.ORIENTATION(t)))},onEEGData:function(e,n){console.log("EEG data received:"),console.log(n)},onBrainWave:function(e,n){console.log("BrainWave data received:"),console.log(n)},onIMUData:function(e,n){console.log("IMU data received:"),console.log(n)},onAttention:function(e,n){console.log({message:"[".concat(e.name,"] Attention:").concat(n)}),document.getElementById("attention").innerText="attention="+n.toFixed(1),i(n,"Attention")},onMeditation:function(e,n){console.log("[".concat(e.name,"] Meditation:").concat(n)),document.getElementById("meditation").innerText="meditation="+n.toFixed(1),i(n,"Meditation")}});function u(){document.getElementById("btn-scan-bluetooth").onclick=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("************ Setup ************"),e.next=3,g.setup(a);case 3:case"end":return e.stop()}},e)}))}function s(n,t){return function(){switch(t){case e.CMD.enum("pair"):g.pair(!0);break;case e.CMD.enum("checkPairStatus"):g.pair(!1)}}}function l(){return d.apply(this,arguments)}function d(){return(d=r(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("************ Setup ************"),e.next=3,g.setup(a);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}var f=document.getElementById("sandboxFrame").contentWindow,g=new n.CMSNDevice(f);u();
},{"./src/cmsn_enum.js":"aIPe","./src/cmsn_sdk.js":"DjNL"}]},{},["Zdfz"], null)
//# sourceMappingURL=/example.js.map